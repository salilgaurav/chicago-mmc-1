<ion-view class="login" hide-nav-bar="true">
    <ion-content>
        <form novalidate name="form">
            <div class="form-header">
                <img class="logo" src="img/ganesha.svg">
                <h1>महाराष्ट्र मंडळ</h1>
                <h2> शिकागो</h2>
            </div>
            <div class="row responsive-md">
                <div class="col col-50 col-offset-25" ng-show="!showPasswordFields">

                    <div class="login-form">
                        <div class="list">
                            <label class="item item-input">
                                <input name="email" class="item-input-custom" type="email"  placeholder="Email" ng-model="email" required>
                            </label>
                            <div>
                                <p ng-show="form.email.$touched && form.email.$error.required" class="item assertive">Email Id is required</p>
                                <p ng-show="form.email.$error.email" class="item assertive">Please enter a valid email Id</p>
                            </div>

                            <label class="item item-input">
                                <input name="pin" class="item-input-custom" type="password" placeholder="Security pin" minlength="4"  maxlength="4" ng-model="pin" required><sup>*<sup>
                            </label>
                            <div>
                                <p ng-show="form.pin.$touched && form.pin.$error.required" class="item assertive">Security PIN is required</p>
                                <p ng-show="form.pin.$error.minlength" class="item assertive">Please enter a PIN continaing 4 characters</p>

                            </div>
                        </div>
                        <button class="button button-block button-login icon-right ion-chevron-right" ng-click="submitPin({pin: pin, email : email})"
                            ng-disabled="form.email.$invalid || form.pin.$invalid">
                            Submit Pin
                        </button>
                    </div>
                    <div class="row options">
                        <div class="col text-center" ui-sref="login">
                            <span>Back</span>
                        </div>
                    </div>
                </div>
                <div class="col col-50 col-offset-25" ng-show="showPasswordFields">
                    <div class="login-form">
                        <div class="list">
                            <label class="item item-input">
                                <input name="password" class="item-input-custom" minlength="8" maxlength="30" type="password" placeholder="Password" ng-model="pass" required="true">
                            </label>
                            <div>
                                <p ng-show="form.password.$touched && form.password.$error.required" class="item assertive">Please enter a password</p>
                                <p ng-show="form.password.$error.minlength" class="item assertive">Please enter a password continaing atleast 8 characters</p>
                                <p ng-show="form.password.$error.maxlength" class="item assertive">The maximum length of a passsword cannot be more than 30</p>
                            </div>
                            <label class="item item-input">
                                <input name="confirm_password" compare-to = "pass" class="item-input-custom" type="password" placeholder="Confirm password" ng-model="cpass" required="true">
                            </label>
                            <div>
                                <p ng-show="form.confirm_password.$touched && form.confirm_password.$error.compareTo" class="item assertive">Passwords did not match</p>
                            </div>

                            <button class="button button-block button-login icon-right ion-chevron-right" ng-click="resetPassword({pin: pin, email : email, password : pass})"
                                ng-disabled="form.confirm_password.$invalid || form.password.$invalid">
                                    Reset Password
                            </button>
                        </div>
                        <div class="row options">
                            <div class="col text-center" ng-click="hidePasswordFields()">
                                <span>Back</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </ion-content>
</ion-view>